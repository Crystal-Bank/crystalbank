{
    "openapi": "3.0.3",
    "info": {
        "description": "App description for OpenAPI docs",
        "title": "CrystalBank",
        "version": "0.3.1"
    },
    "paths": {
        "/accounts/open": {
            "post": {
                "summary": "Request opening",
                "description": "Request opening\nRequest the opening of a new account\n\nRequired permission:\n- **write:accounts.opening**",
                "tags": [
                    "Accounts"
                ],
                "operationId": "CrystalBank::Domains::Accounts::Api::Accounts_open",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CrystalBank__Domains__Accounts__Api__Requests__OpeningRequest"
                            }
                        }
                    },
                    "required": true
                },
                "parameters": [
                    {
                        "name": "idempotency_key",
                        "in": "header",
                        "description": "Idempotency key to ensure unique processing",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Domains__Accounts__Api__Responses__OpeningResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/accounts": {
            "get": {
                "summary": "List",
                "description": "List\nList all accounts\n\nRequired permission:\n- **read:accounts.list**",
                "tags": [
                    "Accounts"
                ],
                "operationId": "CrystalBank::Domains::Accounts::Api::Accounts_list_accounts",
                "parameters": [
                    {
                        "name": "cursor",
                        "in": "query",
                        "description": "Optional cursor parameter for pagination",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Limit parameter for pagination (default 20)",
                        "example": "20",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "Int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Accounts__Api__Responses__Account_"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/customers/onboard": {
            "post": {
                "summary": "Request onboarding",
                "description": "Request onboarding\nRequest the onboarding of a new customer\n\nRequired permission:\n- **write:customers.opening**",
                "tags": [
                    "Customers"
                ],
                "operationId": "CrystalBank::Domains::Customers::Api::Customers_onboard",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CrystalBank__Domains__Customers__Api__Requests__OnboardingRequest"
                            }
                        }
                    },
                    "required": true
                },
                "parameters": [
                    {
                        "name": "idempotency_key",
                        "in": "header",
                        "description": "Idempotency key to ensure unique processing",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "uuid"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Domains__Customers__Api__Responses__OnboardingResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/customers": {
            "get": {
                "summary": "List",
                "description": "List\nList all customers\n\nRequired permission:\n- **read:customers.list**",
                "tags": [
                    "Customers"
                ],
                "operationId": "CrystalBank::Domains::Customers::Api::Customers_list_customers",
                "parameters": [
                    {
                        "name": "cursor",
                        "in": "query",
                        "description": "Optional cursor parameter for pagination",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Limit parameter for pagination (default 20)",
                        "example": "20",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "Int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Customers__Api__Responses__Customer_"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/transactions/internal_transfers/initiate": {
            "post": {
                "summary": "Request initiation",
                "description": "Request initiation\nRequest initiation of an internal transfer\n\nRequired permission:\n- **write:transactions.internal_transfers.initiation**",
                "tags": [
                    "InternalTransfers"
                ],
                "operationId": "CrystalBank::Domains::Transactions::InternalTransfers::Api::InternalTransfers_open",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/CrystalBank__Domains__Transactions__InternalTransfers__Api__Requests__InitiationRequest"
                            }
                        }
                    },
                    "required": true
                },
                "parameters": [],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Domains__Transactions__InternalTransfers__Api__Responses__InitiationResponse"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        },
        "/transactions/postings": {
            "get": {
                "summary": "List",
                "description": "List\nList all postings\n\nRequired permission:\n- **read:postings.list**",
                "tags": [
                    "Postings"
                ],
                "operationId": "CrystalBank::Domains::Transactions::Postings::Api::Postings_list_postings",
                "parameters": [
                    {
                        "name": "cursor",
                        "in": "query",
                        "description": "Optional cursor parameter for pagination",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "format": "uuid",
                            "nullable": true
                        }
                    },
                    {
                        "name": "limit",
                        "in": "query",
                        "description": "Limit parameter for pagination (default 20)",
                        "example": "20",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "Int32"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Transactions__Postings__Api__Responses__Posting_"
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request"
                    },
                    "404": {
                        "description": "Not Found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/CrystalBank__Api__Responses__ErrorResponse"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error"
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "CrystalBank__Domains__Accounts__Api__Requests__OpeningRequest": {
                "type": "object",
                "properties": {
                    "currencies": {
                        "type": "array",
                        "description": "List of supported currencies",
                        "items": {
                            "type": "string",
                            "enum": [
                                "chf",
                                "eur",
                                "gbp",
                                "jpy",
                                "usd"
                            ]
                        }
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "checking",
                            "overnight_money"
                        ],
                        "description": "Type of the account"
                    }
                },
                "required": [
                    "currencies",
                    "type"
                ]
            },
            "CrystalBank__Domains__Accounts__Api__Responses__OpeningResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the requested account"
                    }
                },
                "required": [
                    "id"
                ],
                "description": "Response to an account opening request"
            },
            "CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Accounts__Api__Responses__Account_": {
                "type": "object",
                "properties": {
                    "object": {
                        "type": "string",
                        "description": "Object type of the response"
                    },
                    "url": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Url of the entity"
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "has_more": {
                                "type": "boolean",
                                "description": "Indicator if there are more entries"
                            },
                            "limit": {
                                "type": "integer",
                                "format": "Int32",
                                "description": "Number of entries in the response"
                            },
                            "next_cursor": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Next cursor of the list",
                                "nullable": true
                            }
                        },
                        "required": [
                            "has_more",
                            "limit"
                        ]
                    },
                    "data": {
                        "type": "array",
                        "description": "Array of entities",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the requested account"
                                },
                                "currencies": {
                                    "type": "array",
                                    "description": "Supported currencies of the account",
                                    "items": {
                                        "type": "string",
                                        "enum": [
                                            "chf",
                                            "eur",
                                            "gbp",
                                            "jpy",
                                            "usd"
                                        ]
                                    }
                                },
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "checking",
                                        "overnight_money"
                                    ],
                                    "description": "Type of the account"
                                }
                            },
                            "required": [
                                "id",
                                "currencies",
                                "type"
                            ]
                        }
                    }
                },
                "required": [
                    "object",
                    "url",
                    "meta",
                    "data"
                ]
            },
            "CrystalBank__Domains__Customers__Api__Requests__OnboardingRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Name of the customer"
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "business",
                            "individual"
                        ],
                        "description": "Type of the customer"
                    }
                },
                "required": [
                    "name",
                    "type"
                ]
            },
            "CrystalBank__Domains__Customers__Api__Responses__OnboardingResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the requested customer"
                    }
                },
                "required": [
                    "id"
                ],
                "description": "Response to a customer onboarding request"
            },
            "CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Customers__Api__Responses__Customer_": {
                "type": "object",
                "properties": {
                    "object": {
                        "type": "string",
                        "description": "Object type of the response"
                    },
                    "url": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Url of the entity"
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "has_more": {
                                "type": "boolean",
                                "description": "Indicator if there are more entries"
                            },
                            "limit": {
                                "type": "integer",
                                "format": "Int32",
                                "description": "Number of entries in the response"
                            },
                            "next_cursor": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Next cursor of the list",
                                "nullable": true
                            }
                        },
                        "required": [
                            "has_more",
                            "limit"
                        ]
                    },
                    "data": {
                        "type": "array",
                        "description": "Array of entities",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the requested customer"
                                },
                                "name": {
                                    "type": "string",
                                    "description": "Name of the customer"
                                },
                                "type": {
                                    "type": "string",
                                    "enum": [
                                        "business",
                                        "individual"
                                    ],
                                    "description": "Type of the customer"
                                }
                            },
                            "required": [
                                "id",
                                "name",
                                "type"
                            ]
                        }
                    }
                },
                "required": [
                    "object",
                    "url",
                    "meta",
                    "data"
                ]
            },
            "CrystalBank__Domains__Transactions__InternalTransfers__Api__Requests__InitiationRequest": {
                "type": "object",
                "properties": {
                    "amount": {
                        "type": "integer",
                        "format": "Int64",
                        "description": "Amount for the internal transfer"
                    },
                    "creditor_account_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Account ID of the creditor"
                    },
                    "currency": {
                        "type": "string",
                        "enum": [
                            "chf",
                            "eur",
                            "gbp",
                            "jpy",
                            "usd"
                        ],
                        "description": "Currency of the internal transfer"
                    },
                    "debtor_account_id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Account ID of the debtor"
                    },
                    "remittance_information": {
                        "type": "string",
                        "description": "Remittance information for the transfer"
                    }
                },
                "required": [
                    "amount",
                    "creditor_account_id",
                    "currency",
                    "debtor_account_id",
                    "remittance_information"
                ]
            },
            "CrystalBank__Domains__Transactions__InternalTransfers__Api__Responses__InitiationResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the requested account"
                    }
                },
                "required": [
                    "id"
                ],
                "description": "Response to an internal transfer initiation request"
            },
            "CrystalBank__Api__Responses__ListResponse_CrystalBank__Domains__Transactions__Postings__Api__Responses__Posting_": {
                "type": "object",
                "properties": {
                    "object": {
                        "type": "string",
                        "description": "Object type of the response"
                    },
                    "url": {
                        "type": "string",
                        "format": "uuid",
                        "description": "Url of the entity"
                    },
                    "meta": {
                        "type": "object",
                        "properties": {
                            "has_more": {
                                "type": "boolean",
                                "description": "Indicator if there are more entries"
                            },
                            "limit": {
                                "type": "integer",
                                "format": "Int32",
                                "description": "Number of entries in the response"
                            },
                            "next_cursor": {
                                "type": "string",
                                "format": "uuid",
                                "description": "Next cursor of the list",
                                "nullable": true
                            }
                        },
                        "required": [
                            "has_more",
                            "limit"
                        ]
                    },
                    "data": {
                        "type": "array",
                        "description": "Array of entities",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the posting"
                                },
                                "account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the account the posting belongs to"
                                },
                                "amount": {
                                    "type": "integer",
                                    "format": "Int64",
                                    "description": "Amount"
                                },
                                "creditor_account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the creditor account"
                                },
                                "currency": {
                                    "type": "string",
                                    "enum": [
                                        "aed",
                                        "afn",
                                        "all",
                                        "amd",
                                        "ang",
                                        "aoa",
                                        "ars",
                                        "aud",
                                        "awg",
                                        "azn",
                                        "bam",
                                        "bbd",
                                        "bdt",
                                        "bgn",
                                        "bhd",
                                        "bif",
                                        "bmd",
                                        "bnd",
                                        "bob",
                                        "bov",
                                        "brl",
                                        "bsd",
                                        "btn",
                                        "bwp",
                                        "byn",
                                        "bzd",
                                        "cad",
                                        "cdf",
                                        "che",
                                        "chf",
                                        "chw",
                                        "clf",
                                        "clp",
                                        "cny",
                                        "cop",
                                        "cou",
                                        "crc",
                                        "cuc",
                                        "cup",
                                        "cve",
                                        "czk",
                                        "djf",
                                        "dkk",
                                        "dop",
                                        "dzd",
                                        "egp",
                                        "ern",
                                        "etb",
                                        "eur",
                                        "fjd",
                                        "fkp",
                                        "gbp",
                                        "gel",
                                        "ghs",
                                        "gip",
                                        "gmd",
                                        "gnf",
                                        "gtq",
                                        "gyd",
                                        "hkd",
                                        "hnl",
                                        "htg",
                                        "huf",
                                        "idr",
                                        "ils",
                                        "inr",
                                        "iqd",
                                        "irr",
                                        "isk",
                                        "jmd",
                                        "jod",
                                        "jpy",
                                        "kes",
                                        "kgs",
                                        "khr",
                                        "kmf",
                                        "kpw",
                                        "krw",
                                        "kwd",
                                        "kyd",
                                        "kzt",
                                        "lak",
                                        "lbp",
                                        "lkr",
                                        "lrd",
                                        "lsl",
                                        "lyd",
                                        "mad",
                                        "mdl",
                                        "mga",
                                        "mkd",
                                        "mmk",
                                        "mnt",
                                        "mop",
                                        "mru",
                                        "mur",
                                        "mvr",
                                        "mwk",
                                        "mxn",
                                        "mxv",
                                        "myr",
                                        "mzn",
                                        "nad",
                                        "ngn",
                                        "nio",
                                        "nok",
                                        "npr",
                                        "nzd",
                                        "omr",
                                        "pab",
                                        "pen",
                                        "pgk",
                                        "php",
                                        "pkr",
                                        "pln",
                                        "pyg",
                                        "qar",
                                        "ron",
                                        "rsd",
                                        "rub",
                                        "rwf",
                                        "sar",
                                        "sbd",
                                        "scr",
                                        "sdg",
                                        "sek",
                                        "sgd",
                                        "shp",
                                        "sle",
                                        "sos",
                                        "srd",
                                        "ssp",
                                        "stn",
                                        "svc",
                                        "syp",
                                        "szl",
                                        "thb",
                                        "tjs",
                                        "tmt",
                                        "tnd",
                                        "top",
                                        "try",
                                        "ttd",
                                        "twd",
                                        "tzs",
                                        "uah",
                                        "ugx",
                                        "usd",
                                        "usn",
                                        "uyi",
                                        "uyu",
                                        "uyw",
                                        "uzs",
                                        "ved",
                                        "ves",
                                        "vnd",
                                        "vuv",
                                        "wst",
                                        "xaf",
                                        "xag",
                                        "xau",
                                        "xba",
                                        "xbb",
                                        "xbc",
                                        "xbd",
                                        "xcd",
                                        "xdr",
                                        "xof",
                                        "xpd",
                                        "xpf",
                                        "xpt",
                                        "xsu",
                                        "xts",
                                        "xua",
                                        "xxx",
                                        "yer",
                                        "zar",
                                        "zmw",
                                        "zwg"
                                    ],
                                    "description": "currency of the posting"
                                },
                                "debtor_account_id": {
                                    "type": "string",
                                    "format": "uuid",
                                    "description": "ID of the debtor account"
                                },
                                "remittance_information": {
                                    "type": "string",
                                    "description": "Remittance information"
                                }
                            },
                            "required": [
                                "id",
                                "account_id",
                                "amount",
                                "creditor_account_id",
                                "currency",
                                "debtor_account_id",
                                "remittance_information"
                            ]
                        }
                    }
                },
                "required": [
                    "object",
                    "url",
                    "meta",
                    "data"
                ]
            },
            "CrystalBank__Api__Responses__ErrorResponse": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "string",
                        "format": "uuid",
                        "description": "ID of the error"
                    },
                    "message": {
                        "type": "string",
                        "description": "Error message"
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "iso8601",
                        "description": "Timestamp of the error"
                    },
                    "type": {
                        "type": "string",
                        "description": "Type of the error"
                    }
                },
                "required": [
                    "id",
                    "message",
                    "timestamp",
                    "type"
                ],
                "description": "Default Error Response"
            }
        }
    },
    "servers": [
        {
            "url": "https://api.crystalbank.xyz"
        }
    ]
}